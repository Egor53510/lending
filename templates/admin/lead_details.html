{% extends "admin/base.html" %}

{% block title %}Заявка #{{ lead.id }} | Suno AI{% endblock %}

{% block content %}
<div class="mb-6">
    <a href="/admin" class="text-white hover:text-gray-200 transition">
        <i class="fas fa-arrow-left mr-2"></i>Назад к списку
    </a>
</div>

<div class="glass-morphism rounded-xl overflow-hidden">
    <div class="p-6 border-b border-white border-opacity-20">
        <div class="flex justify-between items-center">
            <h2 class="text-white text-xl font-bold">
                <i class="fas fa-file-alt mr-3"></i>Заявка #{{ lead.id }}
            </h2>
            <span class="px-3 py-1 rounded-full text-sm font-medium
                {% if lead.style == 'rock' %}bg-red-500{% elif lead.style == 'pop' %}bg-pink-500{% elif lead.style == 'jazz' %}bg-blue-500{% elif lead.style == 'electronic' %}bg-purple-500{% elif lead.style == 'hip-hop' %}bg-green-500{% elif lead.style == 'ambient' %}bg-indigo-500{% elif lead.style == 'classical' %}bg-yellow-500{% else %}bg-gray-500{% endif %} bg-opacity-30 text-white">
                {{ lead.style.upper() }}
            </span>
        </div>
    </div>

    <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Основная информация -->
            <div class="space-y-4">
                <h3 class="text-white text-lg font-semibold mb-4">
                    <i class="fas fa-user mr-2"></i>Основная информация
                </h3>
                
                <div class="bg-white bg-opacity-5 rounded-lg p-4">
                    <div class="mb-3">
                        <label class="text-gray-300 text-sm font-medium">Имя</label>
                        <p class="text-white font-medium">{{ lead.name }}</p>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-gray-300 text-sm font-medium">Email</label>
                        <p class="text-white">{{ lead.email }}</p>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-gray-300 text-sm font-medium">Телефон</label>
                        <p class="text-white">{{ lead.phone }}</p>
                    </div>
                    
                    <div>
                        <label class="text-gray-300 text-sm font-medium">Дата заявки</label>
                        <p class="text-white">{{ lead.created_at }}</p>
                    </div>
                </div>
            </div>

            <!-- Детали заказа -->
            <div class="space-y-4">
                <h3 class="text-white text-lg font-semibold mb-4">
                    <i class="fas fa-music mr-2"></i>Детали заказа
                </h3>
                
                <div class="bg-white bg-opacity-5 rounded-lg p-4">
                    <div class="mb-3">
                        <label class="text-gray-300 text-sm font-medium">Музыкальный стиль</label>
                        <p class="text-white font-medium">
                            <span class="px-2 py-1 rounded text-xs
                                {% if lead.style == 'rock' %}bg-red-500{% elif lead.style == 'pop' %}bg-pink-500{% elif lead.style == 'jazz' %}bg-blue-500{% elif lead.style == 'electronic' %}bg-purple-500{% elif lead.style == 'hip-hop' %}bg-green-500{% elif lead.style == 'ambient' %}bg-indigo-500{% elif lead.style == 'classical' %}bg-yellow-500{% else %}bg-gray-500{% endif %} bg-opacity-30 text-white">
                                {{ lead.style.upper() }}
                            </span>
                        </p>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-gray-300 text-sm font-medium">Нужен текст в песне?</label>
                        <p class="text-white">
                            {% if lead.has_text %}
                                <span class="text-green-300"><i class="fas fa-check-circle mr-2"></i>Да</span>
                            {% else %}
                                <span class="text-red-300"><i class="fas fa-times-circle mr-2"></i>Нет</span>
                            {% endif %}
                        </p>
                    </div>
                    
                    {% if lead.has_text and lead.text_description %}
                    <div class="mb-3">
                        <label class="text-gray-300 text-sm font-medium">Описание текста</label>
                        <p class="text-white bg-black bg-opacity-30 rounded p-3">{{ lead.text_description }}</p>
                    </div>
                    {% endif %}
                    
                    {% if lead.message %}
                    <div>
                        <label class="text-gray-300 text-sm font-medium">Комментарий</label>
                        <p class="text-white bg-black bg-opacity-30 rounded p-3">{{ lead.message }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Кнопки действий -->
        <div class="mt-8 flex flex-wrap gap-4">
            <button onclick="copyToClipboard('{{ lead.email }}')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition">
                <i class="fas fa-envelope mr-2"></i>Копировать email
            </button>
            
            <button onclick="copyToClipboard('{{ lead.phone }}')" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition">
                <i class="fas fa-phone mr-2"></i>Копировать телефон
            </button>
            
            <a href="mailto:{{ lead.email }}?subject=Suno AI - Ваша заявка&body=Здравствуйте, {{ lead.name }}!" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg transition">
                <i class="fas fa-reply mr-2"></i>Ответить на email
            </a>
        </div>
    </div>
</div>

<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // Показать уведомление об успешном копировании
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
        notification.innerHTML = '<i class="fas fa-check mr-2"></i>Скопировано!';
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 2000);
    });
}
</script>
{% endblock %}
